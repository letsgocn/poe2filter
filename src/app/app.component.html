<div class="container-fluid full" id="app">
  <div class="content">
    <div class="wrapper">
      <div id="statusBar">
        <div class="statusBarCenter"></div>
        <div class="statusBarRight"></div>
      </div>
      <div class="logo">
        <a href="https://poe2filter.com">
          <img src="/logo-filter.png">
        </a>
      </div>
      <div id="trade" class="block">
        <div class="top">
          <div class="search-panel">
            <div class="search-bar search-advanced">
              <div class="search-advanced-items">
                <div class="search-advanced-pane blue">

                  <div class="filter-group expanded">
                    <div class="filter-group-header">
                      <div class="filter">
                        <span class="filter-body">
                          <span class="filter-title">
                            General Filters
                          </span>
                        </span>
                      </div>
                    </div>
                    <div class="filter-group-body">

                      <div class="filter filter-property full-span" [class.disabled]="!filter.hideFlasks">
                        <span class="input-group-btn">
                          <button class="btn toggle-btn" [class.off]="!filter.hideFlasks" (click)="toggleHideFlasks()"></button>
                        </span>
                        <span class="filter-body">
                          <div class="filter-title">
                            Hide Flasks
                          </div>
                          <!-- <span class="sep"></span>
                          <div tabindex="-1" class="multiselect filter-select" style="width: 271px;">
                            <div class="multiselect__tags">
                              <select [disabled]="!filter.hideFlasks">
                                <option value="All">All</option>
                              </select>
                            </div>
                          </div> -->
                        </span>
                      </div>

                      <div class="filter filter-property full-span" [class.disabled]="!filter.hideScrolls">
                        <span class="input-group-btn">
                          <button class="btn toggle-btn" [class.off]="!filter.hideScrolls" (click)="toggleHideScrolls()"></button>
                        </span>
                        <span class="filter-body">
                          <div class="filter-title">
                            Hide Scrolls of Wisdom
                          </div>
                        </span>
                      </div>

                      <div class="filter full-span" [class.disabled]="!filter.hideJewellery">
                        <span class="input-group-btn">
                          <button class="btn toggle-btn" [class.off]="!filter.hideJewellery" (click)="toggleHideJewellery()"></button>
                        </span>
                        <span class="filter-body">
                          <div class="filter-title">
                            Hide Jewellery
                            <div class="filter-tip"><p>This hides Normal and/or Magic Jewellery (Amulets, Rings, Belts). Rare and Unique Jewellery is always shown.</p></div>
                          </div>
                          <span class="sep"></span>
                          <div tabindex="-1" class="multiselect filter-select" style="width: 271px;">
                            <div class="multiselect__tags">
                              <select [disabled]="!filter.hideJewellery" [(ngModel)]="filter.hideJewelleryOfRarity" (change)="updateFilter()">
                                <option [value]="JewelleryRarity.Normal">Normal</option>
                                <option [value]="JewelleryRarity.NormalAndMagic">Normal and Magic</option>
                              </select>
                            </div>
                          </div>
                        </span>
                      </div>

                      <div class="filter filter-property full-span" [class.disabled]="!filter.hideNormalAndMagicItems">
                        <span class="input-group-btn">
                          <button class="btn toggle-btn" [class.off]="!filter.hideNormalAndMagicItems" (click)="toggleHideNormalAndMagicItems()"></button>
                        </span>
                        <span class="filter-body">
                          <div class="filter-title">
                            Hide Normal And Magic Items
                            <div class="filter-tip"><p>Hides all Normal and Magic weapons and armour; except for the ones specified in the Weapon and Armour filter below.</p></div>
                          </div>
                        </span>
                      </div>

                      <div class="filter full-span" [class.disabled]="!filter.hideGold">
                        <span class="input-group-btn">
                          <button class="btn toggle-btn" [class.off]="!filter.hideGold" (click)="toggleHideGold()"></button>
                        </span>
                        <span class="filter-body">
                          <div class="filter-title">
                            Hide Gold Stacks Lower Than
                            <div class="filter-tip"><p>You will still pick up smaller stacks too.</p></div>
                          </div>
                          <span class="sep"></span>
                          <input type="number" placeholder="min" maxlength="4" pattern="[0-9.,]*" inputmode="numeric" step="any" class="form-control minmax"
                            [disabled]="!filter.hideGold" [(ngModel)]="filter.hideGoldLowerThan" (change)="updateFilter()">
                        </span>
                      </div>

                    </div>

                    <div class="clear"></div>
                  </div>

                  <div class="filter-group expanded">
                    <div class="filter-group-header">
                      <div class="filter">
                        <span class="filter-body">
                          <span class="filter-title">
                            General Highlights
                          </span>
                        </span>
                      </div>
                    </div>
                    <div class="filter-group-body">

                      <div class="filter filter-property full-span" [class.disabled]="!filter.showUniques">
                        <span class="input-group-btn">
                          <button class="btn toggle-btn" [class.off]="!filter.showUniques" (click)="toggleShowUniques()"></button>
                        </span>
                        <span class="filter-body">
                          <div class="filter-title">
                            Highlight Uniques
                          </div>
                        </span>
                      </div>

                      <div class="filter filter-property full-span" [class.disabled]="!filter.showSocketedItems">
                        <span class="input-group-btn">
                          <button class="btn toggle-btn" [class.off]="!filter.showSocketedItems" (click)="toggleShowSocketedItems()"></button>
                        </span>
                        <span class="filter-body">
                          <div class="filter-title">
                            Show Socketed Items
                          </div>
                          <span class="sep"></span>
                          <div tabindex="-1" class="multiselect filter-select" style="width: 271px;">
                            <div class="multiselect__tags">
                              <select [disabled]="!filter.showSocketedItems" [(ngModel)]="filter.showSocketedItemsType" (change)="updateFilter()">
                                <option [value]="SocketedItemType.All">All</option>
                                <option [value]="SocketedItemType.TwoOrMoreSockets">2 Sockets</option>
                              </select>
                            </div>
                          </div>
                        </span>
                      </div>

                      <div class="filter filter-property full-span" [class.disabled]="!filter.showQualityItems">
                        <span class="input-group-btn">
                          <button class="btn toggle-btn" [class.off]="!filter.showQualityItems" (click)="toggleShowQualityItems()"></button>
                        </span>
                        <span class="filter-body">
                          <div class="filter-title">
                            Show Quality Items
                          </div>
                          <span class="sep"></span>
                          <div tabindex="-1" class="multiselect filter-select" style="width: 271px;">
                            <div class="multiselect__tags">
                              <select [disabled]="!filter.showQualityItems" [(ngModel)]="filter.showQualityItemsType" (change)="updateFilter()">
                                <option value="All">All</option>
                                <option value="MinimumTenQuality">> 10 Quality</option>
                              </select>
                            </div>
                          </div>
                        </span>
                      </div>

                      <div class="filter full-span" [class.disabled]="!filter.showUltimateLifeFlasks">
                        <span class="input-group-btn">
                          <button class="btn toggle-btn" [class.off]="!filter.showUltimateLifeFlasks" (click)="toggleShowUltimateLifeFlasks()"></button>
                        </span>
                        <span class="filter-body">
                          <div class="filter-title">
                            Show Quality Ultimate Life Flasks
                          </div>
                          <span class="sep"></span>
                          <input type="number" placeholder="min" maxlength="4" pattern="[0-9.,]*" inputmode="numeric" step="any" class="form-control minmax"
                            [disabled]="!filter.showUltimateLifeFlasks"  [(ngModel)]="filter.showUltimateLifeFlasksMinQuality" (change)="updateFilter()">
                        </span>
                      </div>
                    </div>

                    <div class="clear"></div>
                  </div>

                </div>

                <div class="search-advanced-pane blue">

                  <div class="filter-group expanded">
                    <div class="filter-group-header">
                      <div class="filter">
                        <span class="filter-body">
                          <div class="filter-title">
                            Show Weapon Types
                            <div class="filter-tip"><p>If you checked the 'Hide Normal And Magic Items' box before,
                              here you can specify which Weapon Base Types you still want to show Normal and Magic items of.
                              Specify whether you only want to show the Advanced and/or Expert versions.
                              Note that Rare and Unique Weapons are always shown.</p></div>
                          </div>
                        </span>
                      </div>
                    </div>
                    <div class="filter-group-body">

                      @for (weapon of filter.weaponFilters; track $index) {
                      <div class="filter full-span">
                        <span class="input-group-btn">
                          <button class="btn toggle-btn" [class.off]="!weapon.show" (click)="toggleShowWeapon($index)"></button>
                        </span>
                        <span class="filter-body">
                          <div tabindex="-1" class="multiselect filter-select">
                            <div class="multiselect__tags">
                              <select [(ngModel)]="weapon.weaponType" (change)="updateFilter()" [disabled]="!weapon.show">
                                <option [value]="WeaponType.Bows">Bows</option>
                                <option [value]="WeaponType.Crossbows">Crossbows</option>
                                <option [value]="WeaponType.Focus">Focus</option>
                                <option [value]="WeaponType.OneHandMaces">One Hand Maces</option>
                                <option [value]="WeaponType.QuarterStaves">QuarterStaves</option>
                                <option [value]="WeaponType.Quivers">Quivers</option>
                                <option [value]="WeaponType.Sceptres">Sceptres</option>
                                <option [value]="WeaponType.Shields">Shields</option>
                                <option [value]="WeaponType.Staves">Staves</option>
                                <option [value]="WeaponType.TwoHandMaces">Two Hand Maces</option>
                                <option [value]="WeaponType.Wands">Wands</option>
                              </select>
                            </div>
                          </div>
                          <span class="sep"></span>
                          <div tabindex="-1" class="multiselect filter-select" style="width: 271px;">
                            <div class="multiselect__tags">
                              <select [(ngModel)]="weapon.weaponTier" (change)="updateFilter()" [disabled]="!weapon.show">
                                <option [value]="WeaponTier.ExpertOnly">Expert only</option>
                                <option [value]="WeaponTier.AdvancedAndExpert">Advanced and Expert</option>
                                <option [value]="WeaponTier.All">All</option>
                              </select>
                            </div>
                          </div>
                        </span>
                        <span class="input-group-btn">
                          <button class="btn remove-btn" (click)="removeWeaponType($index)"></button>
                        </span>
                      </div>
                      }

                      <div class="filter filter-padded">
                        <button type="button" class="btn clear-btn" style="width: 100%;" (click)="addWeaponType()">
                          Add Weapon Type
                        </button>
                      </div>
                    </div>
                    <div class="clear"></div>
                  </div>

                  <div class="filter-group expanded">
                    <div class="filter-group-header">
                      <div class="filter">
                        <span class="filter-body">
                          <div class="filter-title">
                            Show Armour Types
                            <div class="filter-tip"><p>If you checked the 'Hide Normal And Magic Items' box before,
                              here you can specify which Armour Base Types you still want to show Normal and Magic items of.
                              Specify a minimum Armour (Arm), Energy Shield (ES) and/or Evasion (Eva) base value to be shown.
                              Specifying two will only show items that meet both criteria (Hence, specifying all three will show no items).
                              Note that Rare and Unique Items are always shown.</p></div>
                          </div>
                        </span>
                      </div>
                    </div>
                    <div class="filter-group-body">

                      <div class="filter full-span" [class.disabled]="!filter.showBodyArmour">
                        <span class="input-group-btn">
                          <button class="btn toggle-btn" [class.off]="!filter.showBodyArmour" (click)="toggleShowBodyArmour()"></button>
                        </span>
                        <span class="filter-body">
                          <div class="filter-title">
                            Body Armour
                          </div>
                          <span class="sep"></span>
                          <input type="number" placeholder="Arm" maxlength="4" pattern="[0-9.,]*" inputmode="numeric" step="any" class="form-control minmax"
                            [(ngModel)]="filter.showBodyArmourArm" (keydown)="filter.showBodyArmour = true;" (change)="updateFilter()">
                          <span class="sep"></span>
                          <input type="number" placeholder="ES" maxlength="4" pattern="[0-9.,]*" inputmode="numeric" step="any" class="form-control minmax"
                            [(ngModel)]="filter.showBodyArmourEs" (keydown)="filter.showBodyArmour = true;" (change)="updateFilter()">
                          <span class="sep"></span>
                          <input type="number" placeholder="Eva" maxlength="4" pattern="[0-9.,]*" inputmode="numeric" step="any" class="form-control minmax"
                            [(ngModel)]="filter.showBodyArmourEva" (keydown)="filter.showBodyArmour = true;" (change)="updateFilter()">
                        </span>
                      </div>

                      <div class="filter full-span" [class.disabled]="!filter.showHelmet">
                        <span class="input-group-btn">
                          <button class="btn toggle-btn" [class.off]="!filter.showHelmet" (click)="toggleShowHelmet()"></button>
                        </span>
                        <span class="filter-body">
                          <div class="filter-title">
                            Helmet
                          </div>
                          <span class="sep"></span>
                          <input type="number" placeholder="Arm" maxlength="4" pattern="[0-9.,]*" inputmode="numeric" step="any" class="form-control minmax"
                          [(ngModel)]="filter.showHelmetArm" (keydown)="filter.showHelmet = true;" (change)="updateFilter()">
                          <span class="sep"></span>
                          <input type="number" placeholder="ES" maxlength="4" pattern="[0-9.,]*" inputmode="numeric" step="any" class="form-control minmax"
                          [(ngModel)]="filter.showHelmetEs" (keydown)="filter.showHelmet = true;" (change)="updateFilter()">
                          <span class="sep"></span>
                          <input type="number" placeholder="Eva" maxlength="4" pattern="[0-9.,]*" inputmode="numeric" step="any" class="form-control minmax"
                          [(ngModel)]="filter.showHelmetEva" (keydown)="filter.showHelmet = true;" (change)="updateFilter()">
                        </span>
                      </div>

                      <div class="filter full-span" [class.disabled]="!filter.showGloves">
                        <span class="input-group-btn">
                          <button class="btn toggle-btn" [class.off]="!filter.showGloves" (click)="toggleShowGloves()"></button>
                        </span>
                        <span class="filter-body">
                          <div class="filter-title">
                            Gloves
                          </div>
                          <span class="sep"></span>
                          <input type="number" placeholder="Arm" maxlength="4" pattern="[0-9.,]*" inputmode="numeric" step="any" class="form-control minmax"
                          [(ngModel)]="filter.showGlovesArm" (keydown)="filter.showGloves = true;" (change)="updateFilter()">
                          <span class="sep"></span>
                          <input type="number" placeholder="ES" maxlength="4" pattern="[0-9.,]*" inputmode="numeric" step="any" class="form-control minmax"
                          [(ngModel)]="filter.showGlovesEs" (keydown)="filter.showGloves = true;" (change)="updateFilter()">
                          <span class="sep"></span>
                          <input type="number" placeholder="Eva" maxlength="4" pattern="[0-9.,]*" inputmode="numeric" step="any" class="form-control minmax"
                          [(ngModel)]="filter.showGlovesEva" (keydown)="filter.showGloves = true;" (change)="updateFilter()">
                        </span>
                      </div>

                      <div class="filter full-span" [class.disabled]="!filter.showBoots">
                        <span class="input-group-btn">
                          <button class="btn toggle-btn" [class.off]="!filter.showBoots" (click)="toggleShowBoots()"></button>
                        </span>
                        <span class="filter-body">
                          <div class="filter-title">
                            Boots
                          </div>
                          <span class="sep"></span>
                          <input type="number" placeholder="Arm" maxlength="4" pattern="[0-9.,]*" inputmode="numeric" step="any" class="form-control minmax"
                            [(ngModel)]="filter.showBootsArm" (keydown)="filter.showBoots = true;" (change)="updateFilter();">
                          <span class="sep"></span>
                          <input type="number" placeholder="ES" maxlength="4" pattern="[0-9.,]*" inputmode="numeric" step="any" class="form-control minmax"
                            [(ngModel)]="filter.showBootsEs" (keydown)="filter.showBoots = true;" (change)="updateFilter()">
                          <span class="sep"></span>
                          <input type="number" placeholder="Eva" maxlength="4" pattern="[0-9.,]*" inputmode="numeric" step="any" class="form-control minmax"
                            [(ngModel)]="filter.showBootsEva" (keydown)="filter.showBoots = true;" (change)="updateFilter()">
                        </span>
                      </div>

                    </div>
                    <div class="clear"></div>
                  </div>

                </div>
              </div>
            </div>
            <div class="controls">
              <div class="controls-left">
                <!-- <button type="button" class="btn livesearch-btn">
                  <span class="plus"></span>
                  Activate Live Search
                </button> -->
              </div>
              <div class="controls-center">
                <button type="button" class="btn search-btn" (click)="download()">
                  Download
                </button>
              </div>
              <div class="controls-right">
                <button type="button" class="btn clear-btn" (click)="clear()">
                  Clear
                </button>
                <!-- <button type="button" class="btn toggle-search-btn">
                  <span alt="Toggle" class="chevron"></span>
                  Hide Filters
                </button> -->
              </div>
              <div class="clear"></div>
            </div>
          </div>
        </div>

        <div class="clear"></div>
      </div>
      <div class="clear"></div>
    </div>

    <div class="results block">
      <div class="row row-total row-justify-content-left">
        <div class="info">
          <h2 class="info-title">Warning! Unidentified <strong>Item Tiers</strong> are currently not supported!</h2>
          Hence, using 'Hide Normal And Magic Items' will currently hide Magic Items even of a higher tier.
          Therefore, <strong>after defeating a boss</strong> or rare monster, quickly <strong>check</strong> whether they dropped any Magic Item with a Tier.
        </div>
      </div>
    </div>

    <div class="results block output">
      <div class="row row-total">
        <h3>Filter output</h3>
        <!-- <button title="Default" class="layout-btn layout-immersion"></button>
        <button title="Compact" class="layout-btn layout-compact"></button>
        <button title="Compact Two-Columned" class="layout-btn layout-compact-two"></button> -->
      </div>

      <textarea class="filter-output">
{{filterText}}
      </textarea>
    </div>

    <div class="results block last-block">
      <div class="row row-total row-justify-content-left">
        <div class="info">
          <h2 class="info-title">How To Use This Filter</h2>
          <ol>
            <li>Download the filter file, and move it into the correct folder. For example on Windows this is <strong>%userprofile%\Documents\My Games\Path of Exile 2</strong>.
              You can open the correct folder from the Game's Settings Menu (under 'Game').</li>
            <li>Select the filter from the dropdown menu in the Game's Settings Menu (under 'Game'). The game will save it for future use, and load it on startup.</li>
            <li>If you change your filter, download the file again and move it over the existing file. Make sure the file name is still correct; your browser might have appended (1) to the file name. Then click the 'Reload' button in the Game Menu.</li>
            <li>The game will tell you when the filter was loaded correctly (or if it encountered a parsing error).</li>
          </ol>

          <p>
            For more information and a thorough guide on the Path Of Exile and Path Of Exile 2 Item Filters,
            check out the <a href="https://www.pathofexile.com/item-filter/about" target="_blank">official page</a>.
          </p>

          <h2 class="info-title">Feedback</h2>
          Feedback and bugreports are welcome at the <a href="https://www.pathofexile.com/forum/view-thread/3630063" target="_blank">PoE Forum Thread</a> or on <a href="https://www.reddit.com/r/PathOfExile2/comments/1hdkhgr/i_made_a_poe2_custom_loot_filter_generation/" target="_blank">Reddit</a>.
        </div>
      </div>
    </div>

    <div class="bottom">
      <span class="copyright">
        This website is in no way affeliated with GGG. I'm making and updating this website in my spare time. You can support me by <a href="https://gofund.me/cf875b64" target="_blank">donating</a>! You can find the source code on <a href="https://github.com/vincentsels/poe2filter" target="_blank">GitHub</a>.
      </span>
      <br>
    </div>
  </div>
</div>
